<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Richiesto Login</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>
        <h1 style="text-align: center;color:black;font-family: BungeeShade">Programma 5Â° superiore</h1>
    </div>
    <a href="index.html" id="redirct" style="display: none;"></a>
    
    
    <div class="main_content" style="background-color: lightblue;">
        <div class="spacer">
            <h1>bella raga</h1>
        </div>
        
        <div id="output" style="width: 50%;">
            <center>
                <h1 style="text-align: center;">Inserire la password per continuare</h1>
                
                <input type="password" style="width: 70%; border:none; border-bottom: 1px solid black; background: transparent; text-align: center;" id="passwordLogin">
                <br>
                <button style="border: 1px solid black; background: lightgray; padding:0 10px 0 10px; border-radius: 10px;" onclick="checkPassword()">Conferma</button>
            </center>
            
            <br>
        </div>
        
        <div class="spacer">
            <h1>
                <h1>bella raga</h1>
            </h1>
        </div>
        <br>
    </div>
</body>
    <script>
        const checkPassword = () => {
            const passwordLogin = document.getElementById("passwordLogin")
            const redirct = document.getElementById("redirct")
            
            fetch("https://serversecurepowerappalermo.onrender.com/check-password", {
                method: "POST",
                body: JSON.stringify({
                    password: passwordLogin.value
                })
            })
            .then(data => data.json())
            .then(data => {
                if(data.result == "OK") {
                    alert("Password corretta, continua ad utilizzare gli appunti")
                    
                    const date = new Date();
                    const days = 365
                    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                    
                    const expires = "; expires=" + date.toUTCString();
                    
                    document.cookie = "reader=1" + expires + "; path=/";
                    redirct.click()
                }else{
                    alert("Password Errata :(")
                }
            })
            
        }
    </script>
</html>